---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) => 
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<BaseLayout 
  title="Blog - Keith Collins"
  description="Development blog covering Unity, game development, JavaScript, and data visualization."
>
  <h2>Blog Posts</h2>

  {sortedPosts.map((post) => (
    <div class="blog-link">
      <span class="date">{post.data.date}</span><br>
      <h2><a href={`/blog/${post.data.postSlug}`}>{post.data.title}</a></h2>
    </div>
  ))}
</BaseLayout>

<style>
  h2 {
    margin: 0;
    font-weight:400;
  }

  .blog-link {
    line-height:1.5;
    border-bottom: 1px solid #ddd;
    padding-top: 20px;
    padding-bottom: 20px;
  }

  .date {
    color: #999;
    font-size: 14px;
  }
</style>
