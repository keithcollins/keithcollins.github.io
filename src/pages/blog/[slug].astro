---
import { getCollection } from 'astro:content';
import type { GetStaticPaths } from 'astro';
import BaseLayout from '../../layouts/BaseLayout.astro';

export const getStaticPaths = (async () => {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.data.postSlug },
    props: { entry },
  }));
}) satisfies GetStaticPaths;

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<BaseLayout 
  title={entry.data.title}
  description={entry.data.description || `${entry.data.title} - Keith Collins`}
  type="article"
  publishedTime={entry.data.date}
>
  <div class="post" id={entry.data.postSlug}>
    <h1>{entry.data.title}</h1>
    <div class="date">POSTED ON {entry.data.date}</div>
    
    <div class="content">
      <Content />
    </div>
  </div>
</BaseLayout>

<style>
  .post {
    padding-bottom: 20px;
    margin-bottom: 20px;
    border-bottom: 1px solid #ddd;
  }

  .post > .date {
    font-size: 12px;
    color: #999;
    margin-top: 10px;
    margin-bottom: 20px;
  }

  .post h1 {
    margin-bottom: 0;
    line-height: 1.2;
    font-weight: 400;
  }
</style>
